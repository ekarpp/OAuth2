<!DOCTYPE html>

<html>
<meta charset="utf-8">

<style>
  body {
      background-color: gray;
  }

  output {
      resize: none;
  }

  button {
      margin: 5px 5px 5px 5px;
  }

  input {
      margin: 5px 5px 5px 5px;
  }

  label {
      margin-left: 5px;
  }

  div {
      display: none;
      background-color: lightgray;
      border-style: solid;
  }
</style>

<body>
  <textarea id="output" name="output" rows="10" cols="64" readonly></textarea> </br>

  <button type="button" onclick="new_client_onclick()">New client</button>

  <button type="button" onclick="toggle_by_id('auth_form')">Auth</button> </br>

  <div id="auth_form">
    <form action="/auth">
      <label for="response_type" style="margin-top: 5px;">Response type:</label> </br>
      <input type="text" id="response_type" name="response_type" value="code" readonly/> </br>

      <label for="redirect_uri">Redirect URI:</label> </br>
      <input type="text" id="redirect_uri" name="redirect_uri" value="http://localhost:8080/redir"/> </br>

      <label for="client_id">Client id:</label> </br>
      <input type="text" id="client_id" name="client_id"/> </br>

      <input type="submit" value="Get authorization"/>
    </form>
  </div>

</body>

<script src="https://unpkg.com/axios/dist/axios.min.js"></script>
<script>
  function new_client_onclick() {
    axios.get("/api/new_client")
      .then(resp => {
        const id = resp.data.client_id;
        document.getElementById("output").value =
          `created client_id is: \n${id}`;
      })
      .catch(console.log);
  }

  function toggle_by_id(id) {
    const elem = document.getElementById(id);
    const style = window.getComputedStyle(elem).getPropertyValue("display");
    if (style === "none")
      elem.style.display = "inline-block";
    else
      elem.style.display = "none";
  }
</script>

</html>
